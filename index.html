<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="index.css">
        <link rel="shortcut icon" href="./images/favicon.jpeg" type="image/x-icon">
        <title class="siteName">Builderment Seeds</title>
        
        <!-- Meta Info -->
        <meta charset="UTF-8">
        <meta name="description" content="Welcome to the Builderment Seeds! Here you can search for any seed you want!">
        <meta name="keywords" content="Builderment Seeds, Builderment, Seeds">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Space.yg and Human-Crow">

        <!-- Open Graph -->
        <meta property="og:title" content="Builderment Seeds">
        <meta property="og:description" content="Welcome to the Builderment Seeds! Here you can search for any seed you want!">
        <meta property="og:url" content="./">
        <meta property="og:image" content="https://space-yg.github.io/builderment-seeds/images/favicon.jpeg">
        <meta name="theme-color" content="#7deb66" data-react-helmet="true">

        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@Space.yag">
        <meta name="twitter:creator" content="@Space.yag">
    </head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZJBGE52HFP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZJBGE52HFP');
    </script>

    <body>
        <!-- Loading Animation -->
        <div class="whiteBackground"></div>
        <div class="lds-spinner"><div></div><div></div><div></div><div>
        </div><div></div><div></div><div></div><div></div><div></div><div>
        </div><div></div><div></div></div>

        <!-- Title -->
        <header class="collection">
            <div class="grid">
                <div></div>
                <div>
                    <h1 class="siteName"></h1>
                </div>
                <div>
                    <button class="languages"><img width="25" height="25" src="https://img.icons8.com/ios/100/globe--v1.png" alt="Globe"></button>
                    <nav class="languages">
                        <ul>
                            <li><a href="?lang=en">English</a></li>
                            <li><a href="?lang=nl">Nederlands</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
            <br>
        </header>

        <!-- Filters -->
        <div class="collection">
            <!-- Resource Filter -->
            <label for="resourceFilter">Resource:</label>
            <select name="resourceFilter" id="resourceFilter">
                <option value="None"></option>
                <optgroup label="Raw Resources">
                    <option value="Wood Log"></option>
                    <option value="Stone"></option>
                    <option value="Iron Ore"></option>
                    <option value="Copper Ore"></option>
                    <option value="Coal"></option>
                    <option value="Wolframite"></option>
                    <option value="Uranium Ore"></option>
                </optgroup>
                <optgroup label="Other">
                    <option value="Atomic Locator"></option>
                    <option value="Battery"></option>
                    <option value="Carbon Fiber"></option>
                    <option value="Computer"></option>
                    <option value="Concrete"></option>
                    <option value="Condenser Lens"></option>
                    <option value="Copper Ingot"></option>
                    <option value="Copper Wire"></option>
                    <option value="Coupler"></option>
                    <option value="Earth Token" selected></option>
                    <option value="Electric Motor"></option>
                    <option value="Electromagnet"></option>
                    <option value="Electron Microscope"></option>
                    <option value="Empty Fuel Cell"></option>
                    <option value="Energy Cube"></option>
                    <option value="Enriched Uranium"></option>
                    <option value="Glass"></option>
                    <option value="Graphite"></option>
                    <option value="Gyroscope"></option>
                    <option value="Heat Sink"></option>
                    <option value="Industrial Frame"></option>
                    <option value="Iron Gear"></option>
                    <option value="Iron Ingot"></option>
                    <option value="Iron Plating"></option>
                    <option value="Logic Circuit"></option>
                    <option value="Magnetic Field Generator"></option>
                    <option value="Matter Compressor"></option>
                    <option value="Matter Duplicator"></option>
                    <option value="Metal Frame"></option>
                    <option value="Nano Wire"></option>
                    <option value="Nuclear Fuel Cell"></option>
                    <option value="Particle Glue"></option>
                    <option value="Quantum Entangler"></option>
                    <option value="Rotor"></option>
                    <option value="Sand"></option>
                    <option value="Steel"></option>
                    <option value="Steel Rod"></option>
                    <option value="Silicon"></option>
                    <option value="Tungsten Carbide"></option>
                    <option value="Tungsten Ore"></option>
                    <option value="Stabilizer"></option>
                    <option value="Super Computer"></option>
                    <option value="Tank"></option>
                    <option value="Turbocharger"></option>
                    <option value="Wood Frame"></option>
                    <option value="Wood Plank"></option>
                </optgroup>
            </select>
            <br>
    
            <!-- Amount Filter -->
            <label for="amountFilter">Filter:</label>
            <select name="amountFilter" id="amountFilter">
                <option value="Max"></option>
                <option value="Min"></option>
                <option value=">">></option>
                <option value="≥">≥</option>
                <option value="=">=</option>
                <option value="≤">≤</option>
                <option value="<"><</option>
            </select>
            <input type="number" min="0" placeholder="Amount" id="amount">
            <select name="order" id="order">
                <option value="Ascending"></option>
                <option value="Descending"></option>
            </select>
            <br>
    
            <!-- World Size Filter -->
            <label>
                <span id="worldSizeCheckName">World Size</span>:
                <input type="checkbox" name="worldSize" id="worldSizeCheck" checked>
                <span class="checkbox"></span>
            </label>
            <input type="range" id="worldSizeFilter" min="1" max="5" value="3">
            <span id="worldSizeRange">100%</span>
            <br>
    
            <!-- Resource Amount Filter -->
            <label>
                <span id="resourceAmountCheckName">Resource Amount</span>:
                <input type="checkbox" name="resourceAmount" id="resourceAmountCheck" checked>
                <span class="checkbox"></span>
            </label>
            <input type="range" id="resourceAmountFilter" min="1" max="5" value="3">
            <span id="resourceAmountRange">100%</span>

            <!-- Total Results -->
            <p><span id="totalResultsName">Total results</span>: <span id="totalResults">0</span></p>
        </div>
        
        <!-- Table -->
        <main class="collection">
            <!-- Table Data -->
            <!-- Credits to Dannie Vinther for the table structure! (https://uxdesign.cc/position-stuck-96c9f55d9526)  -->
            <div class="wrap">
                <div class="headers">
                    <div class="scroller syncscroll" name="myElements" id="dataHeader">
                        <div class="track"><div class="heading">Seed</div></div>
                        <div class="track"><div class="heading">Wood Log</div></div>
                        <div class="track"><div class="heading">Stone</div></div>
                        <div class="track"><div class="heading">Iron Ore</div></div>
                        <div class="track"><div class="heading">Copper Ore</div></div>
                        <div class="track"><div class="heading">Coal</div></div>
                        <div class="track"><div class="heading">Wolframite</div></div>
                        <div class="track"><div class="heading">Uranium</div></div>
                        <div class="track"><div class="heading">World Size</div></div>
                        <div class="track"><div class="heading">Resource Amount</div></div>
                        <div class="track"><div class="heading">Resource</div></div>
                    </div>
                </div>
                <div class="tracks syncscroll" id="data" name="myElements">
                    <div class="track" data-name="sd"></div>
                    <div class="track" data-name="wd"></div>
                    <div class="track" data-name="s"></div>
                    <div class="track" data-name="i"></div>
                    <div class="track" data-name="cp"></div>
                    <div class="track" data-name="cl"></div>
                    <div class="track" data-name="wl"></div>
                    <div class="track" data-name="u"></div>
                    <div class="track" data-name="ws"></div>
                    <div class="track" data-name="r"></div>
                    <div class="track" data-name="rf"></div>
                </div>
            </div>

            <!-- Show More Button -->
            <div class="showMore" id="showMore" hidden>Show More</div>
        </main>
    </body>
    
    <!-- Scripts -->
    <script src="./pages/footer.js" type="module"></script>                                         <!-- Generate the footer -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.2/dist/markdown-it.min.js"></script> <!-- MarkdownIt -->
    <script async type="module">
        //// Convert markdown file to HTML
        let language = new URLSearchParams(location.search).get("lang") || navigator.language.substring(0, 2) || "en"
        let text = await fetch(`./pages/main/languages/${language}/main.md`)
        if (!text.ok) {
            language = "en"
            text = await fetch("./pages/main/languages/en/main.md")
        }
        let json = await fetch(`./pages/main/languages/${language}/words.json`)
        json = await json.json()

        // Site Name
        for (const element of document.getElementsByClassName("siteName")) element.innerHTML = json.other["Builderment Seeds"]
        
        // Main text
        await (async () => {
            text = await text.text()
            document.getElementsByTagName("html")[0].lang = language
            document.querySelector("header.collection").innerHTML += window.markdownit({html: true}).render(text)
        })();

        // Resources
        const dataHeader = document.getElementById("dataHeader");
        (() => {
            const resourceFilter = document.getElementById("resourceFilter")

            // None
            resourceFilter.children[0].innerHTML = json.other["None"]

            // Raw Resources
            resourceFilter.children[1].label = json.other["Raw Resources"]
            for (const option of resourceFilter.children[1].children) option.innerHTML = json.resources[option.value]
            
            // Other Resources
            const otherResourcesArr = []
            resourceFilter.children[2].label = json.other["Other"]
            for (const option of resourceFilter.children[2].children) {
                option.innerHTML = json.resources[option.value]
                otherResourcesArr.push(option)
            }
            otherResourcesArr.sort((a, b) => {
                if (a.innerHTML == b.innerHTML) return 0
                return a.innerHTML > b.innerHTML ? 1 : -1
            })
            resourceFilter.children[2].innerHTML = ""
            for (const option of otherResourcesArr) resourceFilter.children[2].appendChild(option)
        })();

        // Filter
        (() => {
            // Resources Filter
            const resourceFilterName = document.querySelector('label[for="resourceFilter"]')
            resourceFilterName.innerHTML = json.filter["Resource"] + ":"
            
            // Amount Filter
            const amountFilterName = document.querySelector('label[for="amountFilter"]')
            amountFilterName.innerHTML = json.filter["Filter"] + ":"
            const amountFilter = document.getElementById("amountFilter")
            amountFilter.children[0].innerHTML = json.filter["Max"]
            amountFilter.children[1].innerHTML = json.filter["Min"]
            const amountFilterOrder = document.getElementById("order")
            amountFilterOrder.children[0].innerHTML = json.filter["Ascending"]
            amountFilterOrder.children[1].innerHTML = json.filter["Descending"]
            
            // World Size Filter
            const worldSize = document.getElementById("worldSizeCheckName")
            worldSize.innerHTML = json.filter["World Size"]
            
            // Resource Amount Filter
            const resourceAmount = document.getElementById("resourceAmountCheckName")
            resourceAmount.innerHTML = json.filter["Resource Amount"]
            
            // Total Results
            const totalResults = document.getElementById("totalResultsName")
            totalResults.innerHTML = json.filter["Total Results"]
        })();
        
        // Table Data
        (() => {
            dataHeader.children[0].firstChild.innerHTML = json.other["Seed"]
            dataHeader.children[1].firstChild.innerHTML = json.resources["Wood Log"]
            dataHeader.children[2].firstChild.innerHTML = json.resources["Stone"]
            dataHeader.children[3].firstChild.innerHTML = json.resources["Iron Ore"]
            dataHeader.children[4].firstChild.innerHTML = json.resources["Copper Ore"]
            dataHeader.children[5].firstChild.innerHTML = json.resources["Coal"]
            dataHeader.children[6].firstChild.innerHTML = json.resources["Wolframite"]
            dataHeader.children[7].firstChild.innerHTML = json.resources["Uranium Ore"]
            dataHeader.children[8].firstChild.innerHTML = json.filter["World Size"]
            dataHeader.children[9].firstChild.innerHTML = json.filter["Resource Amount"]
            dataHeader.children[10].firstChild.innerHTML = json.filter["Resource"]
        })();

        // Footer
        await (async () => {
            let text = await fetch(`./pages/main/languages/${language}/footer.md`)
            text = await text.text()
            const footerText = document.getElementById("footerText")
            footerText.innerHTML = text
        })();

        //// Footer
        window.addEventListener("DOMContentLoaded", () => {
            document.getElementsByTagName("footer")[0].innerHTML += '<p><a href="https://icons8.com/icon/3685/globe"><img width="15" height="15" src="https://img.icons8.com/ios/100/globe--v1.png" alt="Globe"></a> icon by <a href="https://icons8.com">Icons8</a></p>'
        })
    </script>
    <script src="./pages/index.js" defer></script>                                <!-- Script that runs on all pages -->
    <script src="https://asvd.github.io/syncscroll/syncscroll.js" defer></script> <!-- For Scroll Synchronization between table head and body -->
    <script src="./pages/main/index.js" type="module" defer></script>             <!-- Add the data to the table -->
</html>